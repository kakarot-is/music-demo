(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9385190c"],{"0b5b":function(t,s,i){},"0d28":function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{ref:"table",staticClass:"songs"},[i("div",{staticClass:"s-img"},[i("img",{attrs:{src:t.songList.coverImgUrl,alt:"404"}})]),i("div",{staticClass:"s-menu"},[i("div",{staticClass:"title"},[i("div",[i("span",{staticClass:"tol"},[t._v("歌单")]),i("span",{staticClass:"title-a"},[t._v(t._s(t.songList.name))])]),i("div",{staticClass:"r-nums"},[i("div",{staticClass:"sums"},[t._v(" 歌曲数 "),i("p",[t._v(t._s(t.songList.trackCount))])]),i("div",{staticClass:"plays"},[t._v(" 播放数 "),i("p",[t._v(t._s((t.songList.playCount/1e4).toFixed(0))+"万")])])])]),i("div",{staticClass:"time"},[i("a",{attrs:{href:"#"}},[i("img",{attrs:{src:t.creators.avatarUrl,alt:"404"}})]),i("a",{staticClass:"source",attrs:{href:"#"}},[t._v(t._s(t.creators.nickname))]),i("span",{staticClass:"time-t"},[t._v(t._s(t._f("showDate")(t.songList.createTime))+"创建")])]),i("div",{staticClass:"btn"},[i("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-video-play"},on:{click:function(s){return t.playAll(t.songList.id)}}},[t._v(" 播放全部 "),i("button",{staticClass:"btn-a",on:{click:function(s){return s.stopPropagation(),t.subscripe(t.songList.id)}}},[t._v("+")])]),i("el-button",{attrs:{size:"small",icon:"el-icon-star-off"},on:{click:function(s){return t.subscripe(t.songList.id)}}},[t._v("收藏("+t._s(t.songList.subscribedCount)+")")]),i("el-button",{attrs:{size:"small",icon:"el-icon-thumb"}},[t._v("分享("+t._s(t.songList.shareCount)+")")]),i("el-button",{attrs:{size:"small",icon:"el-icon-download"}},[t._v("下载全部")])],1),i("div",{staticClass:"tag"},[i("span",[t._v("标签:")]),t._l(t.songList.tags,(function(s,e){return i("a",{key:e,attrs:{href:"#"}},[t._v(t._s(e+1===t.songList.tags.length?s:s+" / "))])}))],2),i("div",{staticClass:"brief"},[i("span",{staticStyle:{marginRight:"8px"}},[t._v("简介:")]),i("span",{staticStyle:{lineHeight:"1.5"}},[t._v(t._s((t.songList.description+"").substr(0,200)+"..."))])])]),i("div",{staticClass:"songstable",staticStyle:{width:"90%",marginTop:"20px"}},[i("el-tabs",{staticStyle:{marginLeft:"50px"},on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(s){t.activeName=s},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"歌曲列表",name:"first"}},[i("SongTable",{attrs:{load:t.load,numbers:t.count}})],1),i("el-tab-pane",{attrs:{label:t.gettalk,name:"second"}},[i("SongComment")],1),i("el-tab-pane",{attrs:{label:"收藏者",name:"third"}},[i("SongCollect")],1)],1),i("div",{staticClass:"find",staticStyle:{width:"180px",height:"40px"}},[i("el-input",{attrs:{placeholder:"请输入内容",size:"mini","suffix-icon":"el-icon-search"},model:{value:t.input,callback:function(s){t.input=s},expression:"input"}})],1)],1)])},n=[],a=(i("4160"),i("159b"),function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading"}},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableList,lazy:!0,size:t.size},on:{"&scroll":function(s){return t.handleScroll(s)},"row-click":t.playMusicList}},[t.indexShow?i("el-table-column",{attrs:{type:"index"}}):t._e(),t.doShow?i("el-table-column",{attrs:{label:"操作",width:"70"}},[i("a",{staticClass:"icon",attrs:{href:""},on:{click:function(s){return s.preventDefault(),s.stopPropagation(),t.addCollect(s)}}},[i("i",{directives:[{name:"show",rawName:"v-show",value:t.isshow,expression:"isshow"}],staticClass:"el-icon-star-off"}),i("i",{directives:[{name:"show",rawName:"v-show",value:!t.isshow,expression:"!isshow"}],staticClass:"el-icon-star-on"})]),i("a",{staticClass:"icon",attrs:{href:"#"}},[i("i",{staticClass:"el-icon-download"})])]):t._e(),i("el-table-column",{attrs:{prop:"name",label:"音乐标题",width:t.wth1}}),i("el-table-column",{attrs:{prop:"ar[0].name",label:"歌手",width:t.wth2}}),t.anchorShow?i("el-table-column",{attrs:{prop:"al.name",label:"专辑"}}):t._e(),i("el-table-column",{attrs:{prop:"dt",label:"时长",width:t.wth3}})],1)],1)}),o=[],l=(i("d81d"),i("a9e3"),i("5530")),c=i("2f62"),r=i("735b"),u=i("9de6"),d=i("ee02"),h={name:"SongTable",props:{doShow:{type:Boolean,default:!0},indexShow:{type:Boolean,default:!0},anchorShow:{type:Boolean,default:!0},load:{type:Boolean,default:!1},numbers:{type:Number,default:0},wth1:{type:Number,default:280},wth2:{type:Number,default:200},wth3:{type:Number,default:100},size:{type:String,default:"small"}},data:function(){return{tableList:[],id:0,ids:[],nums:1,isshow:!0,loading:!0}},computed:Object(l["a"])({},Object(c["b"])(["getMusicListIds","getMusicCount"])),methods:{playMusicList:function(t){if(null!==t.id){if(this.getMusicListIds.length>0)return this.$store.commit(u["f"],t.num-1),this.getMusicUrl(this.getMusicListIds[this.getMusicCount]),void this.getMusicMenu(this.getMusicListIds[this.getMusicCount]);this.getMusicUrl(t.id),this.getMusicMenu(t.id)}},addCollect:function(){this.isshow=!this.isshow},getMusicUrl:function(t){var s=this;Object(r["c"])(t).then((function(t){s.$store.commit(u["d"],t.data[0].url)}))},getMusicMenu:function(t){var s=this;Object(r["b"])(t).then((function(t){s.$store.commit(u["e"],t.songs[0])}))},getSongListInfoSongs:function(t){var s=this;Object(r["i"])(t).then((function(t){t.songs[0].num=s.nums++,t.songs[0].dt=Object(d["c"])(t.songs[0].dt),s.tableList.push(t.songs[0]),s.loading=!1}))},getSongListInfo:function(t){var s=this;Object(r["h"])(t).then((function(t){t.playlist.trackIds.forEach((function(t){s.ids.push(t.id)})),s.ids.map((function(t){s.getSongListInfoSongs(t)}))}))}},created:function(){this.id=parseInt(this.$route.params.id),this.getSongListInfo(this.id)},watch:{$route:function(t,s){this.ids=[],this.nums=0,this.tableList=[],console.log(this.ids),this.id=parseInt(t.params.id),this.getSongListInfo(this.id)}}},m=h,f=(i("142d"),i("2877")),g=Object(f["a"])(m,a,o,!1,null,"482afd2a",null),p=g.exports,v=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"collect"},t._l(t.collects,(function(s,e){return i("div",{key:e,staticClass:"item"},[i("img",{attrs:{src:s.avatarUrl,alt:"404"}}),i("p",[t._v(t._s(s.nickname))])])})),0)},b=[],C={data:function(){return{collects:[],id:0}},methods:{getSongListCollect:function(t){var s=this;Object(r["f"])(t).then((function(t){s.collects=t.subscribers}))}},created:function(){this.id=parseInt(this.$route.params.id),this.getSongListCollect(this.id)}},_=C,w=(i("de29"),Object(f["a"])(_,v,b,!1,null,null,null)),y=w.exports,L=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"comment"},[i("div",{staticClass:"myself"},[i("el-input",{attrs:{type:"textarea",placeholder:"请留下你的评论",maxlength:"140","show-word-limit":"",resize:"none"},model:{value:t.text,callback:function(s){t.text=s},expression:"text"}}),i("el-button",{staticStyle:{float:"right",marginTop:"5px"},attrs:{size:"mini"}},[t._v(" 评论 "),i("i",{staticClass:"el-icon-edit el-icon--right"})])],1),i("p",{staticStyle:{marginTop:"30px",fontSize:"14px"}},[t._v("最新评论("+t._s(t.total)+")")]),t._l(t.comments,(function(s,e){return i("div",{key:e,staticClass:"newComment"},[i("div",{staticClass:"userComment"},[i("div",{staticClass:"userImg"},[i("img",{attrs:{src:s.user.avatarUrl,alt:"404"}}),i("div",{staticClass:"talk"},[i("a",{staticStyle:{color:"#0a63ab",margin:"0 8px"},attrs:{href:"#"}},[t._v(t._s(s.user.nickname)+":")]),i("span",{staticStyle:{lineHeight:"1.5"}},[t._v(t._s(s.content))]),i("p",{staticStyle:{margin:"0 8px"}},[t._v(t._s(t._f("showDate")(s.time)))])])]),i("div",{staticClass:"doing"},[i("span",{staticClass:"to"},[t._v("举报!")]),i("span",[i("i",{staticClass:"el-icon-thumb"}),t._v(t._s(s.likedCount>0?"("+s.likedCount+")":""))]),t._v("| "),i("span",[t._v("分享")]),t._v("| "),i("span",[t._v("回复")])])])])}))],2)},S=[],x=(i("99af"),i("2909")),k={data:function(){return{text:"",id:0,comments:[],hotComments:[],total:0}},methods:{getSongListComment:function(t){var s=this;Object(r["g"])(t).then((function(t){s.hotComments=t.hotComments,s.comments=[].concat(Object(x["a"])(t.hotComments),Object(x["a"])(t.comments)),s.total=t.total}))}},created:function(){this.id=parseInt(this.$route.params.id),this.getSongListComment(this.id)},filters:{showDate:function(t){var s=new Date(t);return Object(d["a"])(s,"yyyy-MM-dd hh:mm:ss")}}},I=k,M=(i("b871"),Object(f["a"])(I,L,S,!1,null,null,null)),j=M.exports,O={name:"SongList",components:{SongTable:p,SongCollect:y,SongComment:j},data:function(){return{id:0,ids:[],songList:{},creators:{},activeName:"first",input:"",load:!1,count:0}},methods:{playAll:function(t){this.$store.commit(u["c"],this.ids)},handleClick:function(t,s){},getSongListInfo:function(t){var s=this;Object(r["h"])(t).then((function(t){s.songList=t.playlist,s.creators=t.playlist.creator,s.songList.trackIds.forEach((function(t){s.ids.push(t.id),s.count=s.songList.trackCount}))}))},subscripe:function(t){console.log(t)},listenerFunction:function(t){window.addEventListener("scroll",this.handleScroll,!0)},handleScroll:function(){var t=this.$refs.table.scrollTop;t>700&&(this.load=!0)}},mounted:function(){document.addEventListener("scroll",this.handleScroll,!0)},beforeDestroy:function(){document.removeEventListener("scroll",this.handleScroll,!0)},computed:{gettalk:function(){return"评论(".concat(this.songList.commentCount,")")},getnums:function(){return this.songList.trackCount}},created:function(){this.id=parseInt(this.$route.params.id),this.getSongListInfo(this.id)},filters:{showDate:function(t){var s=new Date(t);return Object(d["a"])(s,"yyyy-MM-dd")}},watch:{$route:function(t,s){console.log(t.params.id),this.id=parseInt(t.params.id),this.getSongListInfo(this.id)}}},$=O,z=(i("2524"),Object(f["a"])($,e,n,!1,null,"636d2646",null));s["default"]=z.exports},"142d":function(t,s,i){"use strict";var e=i("0b5b"),n=i.n(e);n.a},2524:function(t,s,i){"use strict";var e=i("6860"),n=i.n(e);n.a},6860:function(t,s,i){},"6cf9":function(t,s,i){},b871:function(t,s,i){"use strict";var e=i("dca1"),n=i.n(e);n.a},dca1:function(t,s,i){},de29:function(t,s,i){"use strict";var e=i("6cf9"),n=i.n(e);n.a}}]);
//# sourceMappingURL=chunk-9385190c.7892dccf.js.map